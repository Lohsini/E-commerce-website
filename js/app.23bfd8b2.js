(function(t){function e(e){for(var s,i,r=e[0],c=e[1],l=e[2],d=0,u=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var r=a[i];0!==o[r]&&(s=!1)}s&&(n.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},i={app:0},o={app:0},n=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-11fd7a24":"254089e2","chunk-2871e0d6":"8bf63c3f","chunk-28dc0499":"12a82017","chunk-4be9f9f2":"4683e7bb","chunk-5c1d4aa8":"53297912","chunk-65ed2f51":"53c595a7"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-11fd7a24":1,"chunk-2871e0d6":1,"chunk-28dc0499":1,"chunk-4be9f9f2":1,"chunk-5c1d4aa8":1,"chunk-65ed2f51":1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{"chunk-11fd7a24":"4ed0e392","chunk-2871e0d6":"70282c5d","chunk-28dc0499":"0f9dc549","chunk-4be9f9f2":"08a5d797","chunk-5c1d4aa8":"72165b53","chunk-65ed2f51":"549b4be2"}[t]+".css",o=c.p+s,n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var l=n[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===o))return e()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===s||d===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||o,n=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete i[t],p.parentNode.removeChild(p),a(n)},p.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){i[t]=0})));var s=o[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,a){s=o[t]=[e,a]}));e.push(s[2]=n);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(t);var u=new Error;l=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",u.name="ChunkLoadError",u.type=s,u.request=i,a[1](u)}o[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/E-commerce-website/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00bd":function(t,e,a){},"03c4":function(t,e,a){},"1c16":function(t,e,a){"use strict";var s=a("03c4"),i=a.n(s);i.a},"3ac4":function(t,e,a){"use strict";var s=a("00bd"),i=a.n(s);i.a},"543d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=a("bc3a"),o=a.n(i),n=a("a7fe"),r=a.n(n),c=a("9062"),l=a.n(c),d=(a("4989"),a("b87a")),u=a.n(d),p=a("2f62"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},v=[],f={name:"App",components:{},computed:{}},h=f,g=(a("5c0b"),a("2877")),_=Object(g["a"])(h,m,v,!1,null,null,null),b=_.exports,C=(a("e40d"),a("d3b7"),a("8c4f")),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("alert"),a("navbar"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"side col-md-3 ml-sm-auto col-lg-2 p-0"},[a("sidebar")],1),a("div",{staticClass:"main col-md-9 ml-sm-auto col-lg-10 px-4"},[a("router-view")],1)])])],1)},x=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-dark bg-dark p-0 fixed-top"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("商城管理頁面")]),a("a",{staticClass:"signout",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signout(e)}}},[t._v("登出")])])])},k=[],w={data:function(){return{}},methods:{signout:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/logout");console.log(e),this.$http.post(e).then((function(e){console.log(e.data),e.data.success&&t.$router.push("/home")}))}}},M=w,O=(a("3ac4"),Object(g["a"])(M,P,k,!1,null,"3e8c2bcb",null)),$=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("div",{staticClass:"siedebar-content py-4"},[a("h3",{staticClass:"text-muted"},[t._v("管理員")]),a("ul",{staticClass:"nav mb-3"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orderlist"}},[a("i",{staticClass:"fas fa-th-list"}),t._v(" 訂單列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/"}},[a("i",{staticClass:"fas fa-ticket-alt"}),t._v(" 優惠票券 ")])],1)]),a("h3",{staticClass:"text-muted"},[t._v("模擬功能")]),a("ul",{staticClass:"nav"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/customerorder"}},[a("i",{staticClass:"fas fa-th-list"}),t._v(" 模擬訂單 ")])],1)])])])},L=[],E={},S=E,N=(a("66aa"),Object(g["a"])(S,j,L,!1,null,"8497b898",null)),A=N.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},I=[],U=(a("4160"),a("a434"),a("159b"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}}),q=U,F=(a("93c5"),Object(g["a"])(q,D,I,!1,null,null,null)),T=F.exports,B={data:function(){return{}},components:{navbar:$,sidebar:A,alert:T}},z=B,J=(a("1c16"),Object(g["a"])(z,y,x,!1,null,"41d78c51",null)),W=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新的產品")])]),a("table",{staticClass:"table mt-4"},[t._m(0),t._l(t.products,(function(e){return a("tbody",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[1==e.is_enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openModal(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.delModal(e)}}},[t._v("刪除")])])])}))],2),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!1===t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getProducts(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!1===t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)]),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v(" 或 上傳圖片 "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",alt:"",src:t.tempProduct.imageUrl}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"flase-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,i=!!s.checked&&1;if(Array.isArray(a)){var o=null,n=t._i(a,o);s.checked?n<0&&t.$set(t.tempProduct,"is_enabled",a.concat([o])):n>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v("確認刪除")])])])])])],1)},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"120"}},[t._v("分類")]),a("th",[t._v("名稱")]),a("th",{attrs:{width:"120"}},[t._v("原價")]),a("th",{attrs:{width:"120"}},[t._v("售價")]),a("th",{attrs:{width:"100"}},[t._v("是否啟用")]),a("th",{attrs:{width:"150"}},[t._v("編輯 / 刪除")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],K=(a("99af"),a("5530")),Q=a("1157"),Y=a.n(Q),R={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/products?page=").concat(t),a=this;a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.products=t.data.products,a.pagination=t.data.pagination}))},openModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object(K["a"])({},e),this.isNew=!1),Y()("#productModal").modal("show")},updateProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/product"),e="post",a=this;a.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/product/").concat(a.tempProduct.id),e="put"),this.$http[e](t,{data:a.tempProduct}).then((function(t){console.log(t.data),t.data.success?(Y()("#productModal").modal("hide"),a.getProducts()):(Y()("#productModal").modal("hide"),a.getProducts(),console.log("新增失敗"))}))},delModal:function(t){this.tempProduct=Object(K["a"])({},t),Y()("#delProductModal").modal("show")},delProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/product/").concat(this.tempProduct.id),e=this;this.$http.delete(t,{data:e.tempProduct}).then((function(a){console.log(a.data),a.data.success?(Y()("#delProductModal").modal("hide"),e.getProducts()):(Y()("#delProductModal").modal("hide"),e.getProducts(),console.log("刪除失敗"),console.log(t))}))},uploadFile:function(){var t=this;console.log(this);var e=this.$refs.files.files[0],a=this,s=new FormData;s.append("file-to-upload",e);var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/upload");a.status.fileUploading=!0,this.$http.post(i,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data),a.status.fileUploading=!1,e.data.success?a.$set(a.tempProduct,"imageUrl",e.data.imageUrl):t.$bus.$emit("message:push",e.data.message,"danger")}))}},created:function(){this.getProducts()}},V=R,X=Object(g["a"])(V,G,H,!1,null,null,null),Z=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row mt-4"},t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(e.title))])]),a("p",{staticClass:"card-text text-left"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.price?t._e():a("div",{staticClass:"h5"},[t._v(t._s(e.origin_price)+" 元")]),e.price?a("div",{staticClass:"h6"},[t._v("原價 "+t._s(e.origin_price)+" 元")]):t._e(),e.price?a("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(e.price)+" 元")]):t._e()])]),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addtoCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])})),0),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),a("blockquote",{staticClass:"blockquote mt-3"},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),a("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():a("div",{staticClass:"h5"},[t._v(t._s(t.product.origin_price)+" 元")]),t.product.price?a("div",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t.product.price?a("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"from-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?a:a[0])}}},t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v("選購 "+t._s(e)+" "+t._s(t.product.unit))])})),0)]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v(" 小計 "),a("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(t.product.id,t.product.num)}}},[t._v("加到購物車")])])])])]),0!==t.cartLength?a("div",{staticClass:"my-5 row justify-content-center"},[a("div",{staticClass:"col-md-6 my-5 row justify-content-center"},[a("table",{staticClass:"table mt-4",staticStyle:{width:"100%"}},[t._m(1),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(e.final_total)))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cart.total))])]),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t.cart.final_total))])]):t._e()])]),t._m(2)])]):t._e(),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(3)])])],1)},et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("刪除")]),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"}},[t._v("套用優惠碼")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])}],at={data:function(){return{products:[],product:{},cart:[],cartLength:0,pagination:{},isLoading:!1,status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/products?page=").concat(t),a=this;a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.products=t.data.products,a.pagination=t.data.pagination}))},getProduct:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/product/").concat(t);e.status.loadingItem=t,this.$http.get(a).then((function(t){e.product=t.data.product,Y()("#productModal").modal("show"),e.product.num=1,e.status.loadingItem=""}))},addtoCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/cart"),i={product_id:t,qty:e};a.status.loadingItem=t,this.$http.post(s,{data:i}).then((function(t){console.log(t.data),a.status.loadingItem="",a.getCart(),Y()("#productModal").modal("hide")}))},getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/cart");t.isLoading=!0,this.$http.get(e).then((function(e){t.cart=e.data.data,t.cartLength=t.cart.carts.length,t.isLoading=!1}))},removeCartItem:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/cart/").concat(t);e.isLoading=!0,this.$http.delete(a).then((function(t){console.log(t.data),e.getCart(),e.isLoading=!1}))},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/order"),a=t.form;t.isLoading=!0,this.$http.post(e,{data:a}).then((function(e){console.log("訂單已建立",e.data),t.isLoading=!1}))}},created:function(){this.getProducts(),this.getCart()}},st=at,it=Object(g["a"])(st,tt,et,!1,null,null,null),ot=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderlist"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.orderlist,(function(e){return a("tr",{key:e.id,staticClass:"orders"},[a("td",{on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(e.num))]),a("td",{on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(t.changedateFormat(e.create_at)))]),a("td",{staticClass:"text-left",on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(e.id))]),!0===e.is_paid?a("td",{staticStyle:{color:"green"},on:{click:function(a){return t.openDetail(e)}}},[t._v("已完成")]):t._e(),!1===e.is_paid?a("td",{staticStyle:{color:"red"},on:{click:function(a){return t.openDetail(e)}}},[t._v("未完成")]):t._e(),a("td",{on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(e.paid_date))]),a("td",{on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(e.payment_method))]),a("td",{staticClass:"text-right",on:{click:function(a){return t.openDetail(e)}}},[t._v(t._s(t._f("currency")(e.total)))]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openEdit(e)}}},[t._v(" 編輯")])])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"detailInfo",tabindex:"-1",role:"dialog","aria-labelledby":"detailInfoLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[t.infoModalObj.user?a("div",{staticClass:"orderer-info form-group text-left"},[a("h4",[t._v("訂購人資料")]),a("p",[t._v("訂購人姓名："+t._s(t.infoModalObj.user.name))]),a("p",[t._v("訂購人電話："+t._s(t.infoModalObj.user.tel))]),a("p",[t._v("訂購人信箱："+t._s(t.infoModalObj.user.email))]),a("p",[t._v("訂購人地址："+t._s(t.infoModalObj.user.address))]),a("p",[t._v("備註："),t.infoModalObj.message?t._e():a("span",[t._v("無備註")]),t.infoModalObj.message?a("span",[t._v(t._s(t.infoModalObj.message))]):t._e()])]):t._e(),t.productArray?a("div",{staticClass:"order-list form-group"},[a("h4",[t._v("訂購商品清單")]),a("table",{staticClass:"table"},[t._m(2),a("tbody",t._l(t.productArray,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.product.title))]),a("td",[t._v(t._s(e.qty))]),a("td",[t._v(t._s(e.product.unit))]),a("td",[t._v(t._s(t._f("currency")(e.product.price)))]),a("td",[t._v(t._s(t._f("currency")(e.total)))])])})),0)])]):t._e()]),t._m(3)])])]),a("div",{staticClass:"modal fade",attrs:{id:"editInfo",tabindex:"-1",role:"dialog","aria-labelledby":"editInfoLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(4),a("div",{staticClass:"modal-body"},[t.editModalObj?a("div",{staticClass:"orderer-info form-group text-left"},[a("h4",[t._v("付款資料")]),a("p",[t._v("付款： "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editModalObj.is_paid,expression:"editModalObj.is_paid"}],attrs:{type:"text"},domProps:{value:t.editModalObj.is_paid},on:{input:function(e){e.target.composing||t.$set(t.editModalObj,"is_paid",e.target.value)}}})]),a("p",[t._v("付款日期： "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editModalObj.paid_date,expression:"editModalObj.paid_date"}],attrs:{type:"text"},domProps:{value:t.editModalObj.paid_date},on:{input:function(e){e.target.composing||t.$set(t.editModalObj,"paid_date",e.target.value)}}})]),a("p",[t._v("付款方式： "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editModalObj.payment_method,expression:"editModalObj.payment_method"}],attrs:{type:"text"},domProps:{value:t.editModalObj.payment_method},on:{input:function(e){e.target.composing||t.$set(t.editModalObj,"payment_method",e.target.value)}}})])]):t._e()]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm bg-primary text-white",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.editOrderList(t.editModalObj.id)}}},[t._v("這個按鈕的api不存在")])])])])])],1)},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("NO.")]),a("th",[t._v("下單時間")]),a("th",[t._v("訂單編號")]),a("th",[t._v("付款")]),a("th",[t._v("付款日期")]),a("th",[t._v("付款方式")]),a("th",[t._v("總價")]),a("th",[t._v("修改")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-info text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"detailInfoLabel"}},[a("span",{staticStyle:{"font-weight":"900"}},[t._v("訂購資訊")])]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{staticStyle:{fontSize:"2rem"},attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單位")]),a("th",[t._v("小計")]),a("th",[t._v("合計")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm bg-info text-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 確認 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-primary text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"editInfoLabel"}},[a("span",{staticStyle:{"font-weight":"900"}},[t._v("編輯訂購資訊")])]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{staticStyle:{fontSize:"2rem"},attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],ct=(a("b64b"),{computed:{},data:function(){return{orderlist:[],pagination:{},tempProduct:{},infoModalObj:{},editModalObj:{},productArray:[],isNew:!1,isLoading:!1,status:{fileUploading:!1}}},methods:{editOrderList:function(t){console.log("this.editModalObj.is_paid:",this.editModalObj.is_paid);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/order/").concat(t),a=this;console.log("api:",e),a.isLoading=!0;var s=new FormData;s.append("is_paid",this.editModalObj.is_paid),this.$http.put(e,s).then((function(t){console.log(t.data),a.isLoading=!1}))},getOrderlist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lohi","/admin/orders?page=").concat(t),a=this;a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.orderlist=t.data.orders,a.pagination=t.data.pagination}))},openDetail:function(t){this.infoModalObj=Object(K["a"])({},t),this.productArray=[];for(var e=Object.keys(this.infoModalObj.products),a=0;a<e.length;a+=1){var s=e[a],i=this.infoModalObj.products[s];this.productArray.push(i)}Y()("#detailInfo").modal("show")},openEdit:function(t){this.editModalObj=Object(K["a"])({},t),Y()("#editInfo").modal("show")},changedateFormat:function(t){var e=new Date(1e3*t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();if(s<10){var o="0".concat(s);if(i<10){var n="0".concat(i),r="".concat(String(a),"-").concat(String(o),"-").concat(String(n));return r}var c="".concat(String(a),"-").concat(String(o),"-").concat(String(i));return c}if(i<10){var l="0".concat(i);if(s<10){var d="0".concat(s),u="".concat(String(a),"-").concat(String(d),"-").concat(String(l));return u}var p="".concat(String(a),"-").concat(String(s),"-").concat(String(l));return p}var m="".concat(String(a),"-").concat(String(s),"-").concat(String(i));return m}},created:function(){this.getOrderlist()}}),lt=ct,dt=(a("9a18"),Object(g["a"])(lt,nt,rt,!1,null,"6fc6817b",null)),ut=dt.exports;s["a"].use(C["a"]);var pt=[{path:"*",redirect:"/"},{name:"shoppage",path:"/",component:function(){return a.e("chunk-2871e0d6").then(a.bind(null,"1c2a"))},children:[{name:"landingPage",path:"/",component:function(){return a.e("chunk-28dc0499").then(a.bind(null,"cfc1"))}},{name:"landingPage",path:"/landingPage",component:function(){return a.e("chunk-28dc0499").then(a.bind(null,"cfc1"))}},{name:"shopping",path:"/shopping",component:function(){return a.e("chunk-65ed2f51").then(a.bind(null,"1faa"))}},{name:"cart",path:"/cart",component:function(){return a.e("chunk-4be9f9f2").then(a.bind(null,"a19f"))}},{name:"imformationForm",path:"/imformationform",component:function(){return a.e("chunk-5c1d4aa8").then(a.bind(null,"3147"))}},{name:"loginPage",path:"/loginpage",component:function(){return a.e("chunk-11fd7a24").then(a.bind(null,"a953"))}}]},{name:"managerpage",path:"/admin",component:W,children:[{name:"products",path:"products",component:Z,meta:{requiresAuth:!0}},{name:"orderlist",path:"orderlist",component:ut,meta:{requiresAuth:!0}},{name:"orderlist",path:"orderlist",component:ut,meta:{requiresAuth:!0}}]},{name:"managerpage",path:"/customerorder",component:W,children:[{name:"模擬訂單",path:"/",component:ot}]}],mt=new C["a"]({routes:pt,linkActiveClass:"active",linkExactActiveClass:"activee"}),vt=mt,ft=(a("a9e3"),a("b680"),a("ac1f"),a("5319"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))});s["a"].prototype.$bus=new s["a"],s["a"].use(p["a"]);var ht=new p["a"].Store({state:{isLoading:!1},actions:{updateLoading:function(t,e){t.commit("LOADING",e)}},mutations:{LOADING:function(t,e){t.isLoading=e}},modules:{}});s["a"].use(u.a),s["a"].use(p["a"]),s["a"].config.productionTip=!1,s["a"].use(r.a,o.a),s["a"].component("Loading",l.a),s["a"].filter("currency",ft),o.a.defaults.withCredentials=!0,new s["a"]({router:vt,store:ht,render:function(t){return t(b)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"5faf":function(t,e,a){},"66aa":function(t,e,a){"use strict";var s=a("82d2"),i=a.n(s);i.a},"82d2":function(t,e,a){},"93c5":function(t,e,a){"use strict";var s=a("543d"),i=a.n(s);i.a},"9a18":function(t,e,a){"use strict";var s=a("5faf"),i=a.n(s);i.a},"9c0c":function(t,e,a){}});
//# sourceMappingURL=app.23bfd8b2.js.map